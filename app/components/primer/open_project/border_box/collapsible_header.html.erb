<%= render(Primer::BaseComponent.new(**@system_arguments)) do %>
  <%= render(Primer::OpenProject::FlexLayout.new(
    data: {
      target: "collapsible-header.triggerElement",
      action: "click:collapsible-header#toggle keydown:collapsible-header#handleKeydown"
    },
    tabindex: 0,
    role: "button",
    id: @title_id,
    aria: {
      expanded: !@collapsed,
    },
    classes: "collapsible-header--triggerArea"
  )) do |flex| %>
    <%= flex.with_row do %>
      <%= title %>
      <% if count? %>
        <%= count %>
      <% end %>
      <%= render(Primer::Beta::Octicon.new(icon: "chevron-up", hidden: @collapsed, data: { target: "collapsible-header.arrowUp" })) %>
      <%= render(Primer::Beta::Octicon.new(icon: "chevron-down", hidden: !@collapsed, data: { target: "collapsible-header.arrowDown" })) %>
    <% end %>
    <%= flex.with_row do %>
      <% if description? %>
        <%= description %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
